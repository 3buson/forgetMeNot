/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};

;// CONCATENATED MODULE: ./src/types.ts
var StorageKeyType;
(function (StorageKeyType) {
    StorageKeyType["ISSUE_UPDATED_TIMESTAMPS"] = "issueUpdatedTimestamps";
    StorageKeyType["LAST_CHANGED"] = "lastChanged";
    StorageKeyType["CREDENTIALS"] = "credentials";
})(StorageKeyType || (StorageKeyType = {}));
var TrackingEventType;
(function (TrackingEventType) {
    TrackingEventType["NEW_USER"] = "NEW_USER";
})(TrackingEventType || (TrackingEventType = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdHlwZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFOLElBQVksY0FJWDtBQUpELFdBQVksY0FBYztJQUN0QixxRUFBbUQsQ0FBQTtJQUNuRCw4Q0FBNEIsQ0FBQTtJQUM1Qiw2Q0FBMkIsQ0FBQTtBQUMvQixDQUFDLEVBSlcsY0FBYyxLQUFkLGNBQWMsUUFJekI7QUFFRCxNQUFNLENBQU4sSUFBWSxpQkFFWDtBQUZELFdBQVksaUJBQWlCO0lBQ3pCLDBDQUFxQixDQUFBO0FBQ3pCLENBQUMsRUFGVyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBRTVCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gU3RvcmFnZUtleVR5cGUge1xuICAgIElTU1VFX1VQREFURURfVElNRVNUQU1QUyA9IFwiaXNzdWVVcGRhdGVkVGltZXN0YW1wc1wiLFxuICAgIExBU1RfQ0hBTkdFRCA9IFwibGFzdENoYW5nZWRcIixcbiAgICBDUkVERU5USUFMUyA9IFwiY3JlZGVudGlhbHNcIixcbn1cblxuZXhwb3J0IGVudW0gVHJhY2tpbmdFdmVudFR5cGUge1xuICAgIE5FV19VU0VSID0gJ05FV19VU0VSJyxcbn1cblxuZXhwb3J0IHR5cGUgVHJhY2tpbmdEYXRhID0ge1xuICAgIGV2ZW50OiBUcmFja2luZ0V2ZW50VHlwZSxcbiAgICBkaXN0aW5jdF9pZDogc3RyaW5nLFxuICAgIGlkZW50aWZpZXI6IHN0cmluZyxcbn1cblxuZXhwb3J0IHR5cGUgTWl4cGFuZWxUcmFja2luZ0RhdGEgPSB7XG4gICAgZXZlbnQ6IHN0cmluZyxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHRva2VuOiBzdHJpbmcsXG4gICAgICAgIHRpbWU6IG51bWJlcixcbiAgICB9ICYgVHJhY2tpbmdEYXRhXG59XG5cbmV4cG9ydCB0eXBlIEppcmFJc3N1ZXNSZXNwb25zZSA9IHtcbiAgICBpc3N1ZXM6IEppcmFJc3N1ZVtdLFxufVxuXG5leHBvcnQgdHlwZSBKaXJhSXNzdWUgPSB7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIHVwZGF0ZWQ6IHN0cmluZyxcbiAgICB9XG59XG4iXX0=
;// CONCATENATED MODULE: ./src/shared/storage.ts
function saveLocally(key, value) {
    return new Promise(resolve => chrome.storage.local.set({ [key]: value }, () => resolve()));
}
function getLocally(key) {
    return new Promise(resolve => {
        chrome.storage.local.get().then(storage => {
            resolve(storage[key]);
        });
    });
}
function saveSync(key, value) {
    return new Promise(resolve => chrome.storage.sync.set({ [key]: value }, () => resolve()));
}
function getSync(key) {
    return new Promise(resolve => {
        chrome.storage.sync.get().then(storage => {
            resolve(storage[key]);
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zaGFyZWQvc3RvcmFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLFVBQVUsV0FBVyxDQUFFLEdBQW1CLEVBQUUsS0FBVTtJQUN4RCxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDOUYsQ0FBQztBQUVELE1BQU0sVUFBVSxVQUFVLENBQUUsR0FBbUI7SUFDM0MsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUN6QixNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDdEMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO1FBQ3pCLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQyxDQUFDLENBQUE7QUFDTixDQUFDO0FBRUQsTUFBTSxVQUFVLFFBQVEsQ0FBRSxHQUFtQixFQUFFLEtBQVU7SUFDckQsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQzdGLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUFFLEdBQW1CO0lBQ3hDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDekIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3JDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUN6QixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JhZ2VLZXlUeXBlIH0gZnJvbSBcIi4uL3R5cGVzXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVMb2NhbGx5IChrZXk6IFN0b3JhZ2VLZXlUeXBlLCB2YWx1ZTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgW2tleV06IHZhbHVlIH0sICgpID0+IHJlc29sdmUoKSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhbGx5IChrZXk6IFN0b3JhZ2VLZXlUeXBlKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgpLnRoZW4oc3RvcmFnZSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHN0b3JhZ2Vba2V5XSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVN5bmMgKGtleTogU3RvcmFnZUtleVR5cGUsIHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7IFtrZXldOiB2YWx1ZSB9LCAoKSA9PiByZXNvbHZlKCkpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3luYyAoa2V5OiBTdG9yYWdlS2V5VHlwZSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgpLnRoZW4oc3RvcmFnZSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHN0b3JhZ2Vba2V5XSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuIl19
;// CONCATENATED MODULE: ./src/shared/issues.ts


async function loadIssues() {
    console.log("Loading issues from Jira.");
    const credentials = await getSync(StorageKeyType.CREDENTIALS);
    if (!credentials || !credentials.email || !credentials.apiKey) {
        console.warn("Credentials not present! Cannot fetch from Jira.");
        chrome.runtime.openOptionsPage();
        return;
    }
    const url = "https://celtra.atlassian.net/rest/api/3/search?jql=assignee%20%3D%20currentUser()%20and%20status%20in%20(\"Code%20review\"%2C%20\"Spec%20review\")";
    const options = {
        method: "GET",
        headers: { "Authorization": `Basic ${btoa(`${credentials.email}:${credentials.apiKey}`)}` },
    };
    return fetch(url, options)
        .then(response => response.json())
        .then((data) => {
        console.log("Issues loaded, saving into storage.");
        saveLocally(StorageKeyType.ISSUE_UPDATED_TIMESTAMPS, data.issues.map(issue => issue.fields.updated));
        saveLocally(StorageKeyType.LAST_CHANGED, Date.now());
    })
        .catch(error => console.error(error));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXNzdWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NoYXJlZC9pc3N1ZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFzQixjQUFjLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDN0QsT0FBTyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxXQUFXLENBQUE7QUFFaEQsTUFBTSxDQUFDLEtBQUssVUFBVSxVQUFVO0lBQzVCLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtJQUN4QyxNQUFNLFdBQVcsR0FBRyxNQUFNLE9BQU8sQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDN0QsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFO1FBQzNELE9BQU8sQ0FBQyxJQUFJLENBQUMsa0RBQWtELENBQUMsQ0FBQTtRQUNoRSxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxDQUFBO1FBQ2hDLE9BQU07S0FDVDtJQUVELE1BQU0sR0FBRyxHQUFHLG9KQUFvSixDQUFBO0lBQ2hLLE1BQU0sT0FBTyxHQUFHO1FBQ1osTUFBTSxFQUFFLEtBQUs7UUFDYixPQUFPLEVBQUUsRUFBRSxlQUFlLEVBQUUsU0FBUyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsS0FBSyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7S0FDOUYsQ0FBQTtJQUVELE9BQU8sS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUM7U0FDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2pDLElBQUksQ0FBQyxDQUFDLElBQXdCLEVBQUUsRUFBRTtRQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxDQUFDLENBQUE7UUFDbEQsV0FBVyxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtRQUNwRyxXQUFXLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUN4RCxDQUFDLENBQUM7U0FDRCxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7QUFDN0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEppcmFJc3N1ZXNSZXNwb25zZSwgU3RvcmFnZUtleVR5cGUgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgZ2V0U3luYywgc2F2ZUxvY2FsbHkgfSBmcm9tIFwiLi9zdG9yYWdlXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJc3N1ZXMgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKFwiTG9hZGluZyBpc3N1ZXMgZnJvbSBKaXJhLlwiKVxuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXdhaXQgZ2V0U3luYyhTdG9yYWdlS2V5VHlwZS5DUkVERU5USUFMUylcbiAgICBpZiAoIWNyZWRlbnRpYWxzIHx8ICFjcmVkZW50aWFscy5lbWFpbCB8fCAhY3JlZGVudGlhbHMuYXBpS2V5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkNyZWRlbnRpYWxzIG5vdCBwcmVzZW50ISBDYW5ub3QgZmV0Y2ggZnJvbSBKaXJhLlwiKVxuICAgICAgICBjaHJvbWUucnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vY2VsdHJhLmF0bGFzc2lhbi5uZXQvcmVzdC9hcGkvMy9zZWFyY2g/anFsPWFzc2lnbmVlJTIwJTNEJTIwY3VycmVudFVzZXIoKSUyMGFuZCUyMHN0YXR1cyUyMGluJTIwKFxcXCJDb2RlJTIwcmV2aWV3XFxcIiUyQyUyMFxcXCJTcGVjJTIwcmV2aWV3XFxcIilcIlxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkF1dGhvcml6YXRpb25cIjogYEJhc2ljICR7YnRvYShgJHtjcmVkZW50aWFscy5lbWFpbH06JHtjcmVkZW50aWFscy5hcGlLZXl9YCl9YCB9LFxuICAgIH1cblxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKGRhdGE6IEppcmFJc3N1ZXNSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJc3N1ZXMgbG9hZGVkLCBzYXZpbmcgaW50byBzdG9yYWdlLlwiKVxuICAgICAgICAgICAgc2F2ZUxvY2FsbHkoU3RvcmFnZUtleVR5cGUuSVNTVUVfVVBEQVRFRF9USU1FU1RBTVBTLCBkYXRhLmlzc3Vlcy5tYXAoaXNzdWUgPT4gaXNzdWUuZmllbGRzLnVwZGF0ZWQpKVxuICAgICAgICAgICAgc2F2ZUxvY2FsbHkoU3RvcmFnZUtleVR5cGUuTEFTVF9DSEFOR0VELCBEYXRlLm5vdygpKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpXG59XG4iXX0=
;// CONCATENATED MODULE: ./src/shared/utils.ts



const ONE_DAY_IN_MILISECONDS = 24 * 60 * 60 * 1000;
let timeout = null;
let currentIconState = 0;
const ISSUES_URL = "https://celtra.atlassian.net/issues/?jql=assignee%20%3D%20currentUser()%20and%20status%20in%20(\"Code%20review\"%2C%20\"Spec%20review\")";
function utils_toggleElement(elementId, visible) {
    const display = visible ? "block" : "none";
    const element = document.getElementById(elementId);
    if (!element) {
        return;
    }
    element.style.display = display;
}
async function update() {
    await loadIssues();
    const numberOfIssues = await utils_getNumberOfIssues();
    const numberOfStaleIssues = await utils_getNumberOfStaleIssues();
    animateIcon(numberOfIssues, numberOfStaleIssues);
}
async function utils_getNumberOfIssues() {
    const issueUpdatedTimestamps = await getLocally(StorageKeyType.ISSUE_UPDATED_TIMESTAMPS);
    if (!Array.isArray(issueUpdatedTimestamps)) {
        return 0;
    }
    return issueUpdatedTimestamps.length;
}
async function utils_getNumberOfStaleIssues() {
    const issueUpdatedTimestamps = await getLocally(StorageKeyType.ISSUE_UPDATED_TIMESTAMPS);
    if (!Array.isArray(issueUpdatedTimestamps)) {
        return 0;
    }
    return issueUpdatedTimestamps.reduce((numberOfStaleIssues, issueUpdatedTimestamp) => {
        const nowTime = new Date().getTime();
        const issueTime = new Date(issueUpdatedTimestamp).getTime();
        const diffInMiliseconds = Math.abs(nowTime - issueTime);
        if (diffInMiliseconds > ONE_DAY_IN_MILISECONDS) {
            return numberOfStaleIssues + 1;
        }
        else {
            return numberOfStaleIssues;
        }
    }, 0);
}
function animateIcon(numberOfIssues, numberOfStaleIssues) {
    if (numberOfIssues === 0) {
        chrome.action.setIcon({ path: "../../public/icon128.png" });
        return;
    }
    if (numberOfStaleIssues === 0) {
        chrome.action.setIcon({ path: "../../public/bunny_0.png" });
        return;
    }
    currentIconState++;
    const iconNumber = currentIconState % 4;
    chrome.action.setIcon({ path: `../../public/bunny_${iconNumber}.png` });
    if (timeout) {
        clearTimeout(timeout);
        timeout = null;
    }
    timeout = setTimeout(() => animateIcon(numberOfIssues, numberOfStaleIssues), 50);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2hhcmVkL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDekMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUNyQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRXRDLE1BQU0sc0JBQXNCLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFBO0FBQ2xELElBQUksT0FBTyxHQUF5QyxJQUFJLENBQUE7QUFDeEQsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUE7QUFFeEIsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLDBJQUEwSSxDQUFBO0FBRXBLLE1BQU0sVUFBVSxhQUFhLENBQUUsU0FBaUIsRUFBRSxPQUFnQjtJQUM5RCxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFBO0lBQzFDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDbEQsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNWLE9BQU07S0FDVDtJQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtBQUNuQyxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxNQUFNO0lBQ3hCLE1BQU0sVUFBVSxFQUFFLENBQUE7SUFDbEIsTUFBTSxjQUFjLEdBQUcsTUFBTSxpQkFBaUIsRUFBRSxDQUFBO0lBQ2hELE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxzQkFBc0IsRUFBRSxDQUFBO0lBQzFELFdBQVcsQ0FBQyxjQUFjLEVBQUUsbUJBQW1CLENBQUMsQ0FBQTtBQUNwRCxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxpQkFBaUI7SUFDbkMsTUFBTSxzQkFBc0IsR0FBRyxNQUFNLFVBQVUsQ0FBQyxjQUFjLENBQUMsd0JBQXdCLENBQUMsQ0FBQTtJQUN4RixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1FBQ3hDLE9BQU8sQ0FBQyxDQUFBO0tBQ1g7SUFFRCxPQUFPLHNCQUFzQixDQUFDLE1BQU0sQ0FBQTtBQUN4QyxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxzQkFBc0I7SUFDeEMsTUFBTSxzQkFBc0IsR0FBRyxNQUFNLFVBQVUsQ0FBQyxjQUFjLENBQUMsd0JBQXdCLENBQUMsQ0FBQTtJQUN4RixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFO1FBQ3hDLE9BQU8sQ0FBQyxDQUFBO0tBQ1g7SUFFRCxPQUFPLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLG1CQUFtQixFQUFFLHFCQUFxQixFQUFFLEVBQUU7UUFDaEYsTUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNwQyxNQUFNLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQzNELE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLENBQUE7UUFDdkQsSUFBSSxpQkFBaUIsR0FBRyxzQkFBc0IsRUFBRTtZQUM1QyxPQUFPLG1CQUFtQixHQUFHLENBQUMsQ0FBQTtTQUNqQzthQUFNO1lBQ0gsT0FBTyxtQkFBbUIsQ0FBQTtTQUM3QjtJQUNMLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUNULENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBRSxjQUFzQixFQUFFLG1CQUEyQjtJQUNyRSxJQUFJLGNBQWMsS0FBSyxDQUFDLEVBQUU7UUFDdEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEVBQUUsQ0FBQyxDQUFBO1FBQzNELE9BQU07S0FDVDtJQUVELElBQUksbUJBQW1CLEtBQUssQ0FBQyxFQUFFO1FBQzNCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLDBCQUEwQixFQUFFLENBQUMsQ0FBQTtRQUMzRCxPQUFNO0tBQ1Q7SUFFRCxnQkFBZ0IsRUFBRSxDQUFBO0lBQ2xCLE1BQU0sVUFBVSxHQUFHLGdCQUFnQixHQUFHLENBQUMsQ0FBQTtJQUN2QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxzQkFBc0IsVUFBVSxNQUFNLEVBQUUsQ0FBQyxDQUFBO0lBQ3ZFLElBQUksT0FBTyxFQUFFO1FBQ1QsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3JCLE9BQU8sR0FBRyxJQUFJLENBQUE7S0FDakI7SUFDRCxPQUFPLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsbUJBQW1CLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUNwRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RvcmFnZUtleVR5cGUgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgbG9hZElzc3VlcyB9IGZyb20gXCIuL2lzc3Vlc1wiXG5pbXBvcnQgeyBnZXRMb2NhbGx5IH0gZnJvbSBcIi4vc3RvcmFnZVwiXG5cbmNvbnN0IE9ORV9EQVlfSU5fTUlMSVNFQ09ORFMgPSAyNCAqIDYwICogNjAgKiAxMDAwXG5sZXQgdGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxubGV0IGN1cnJlbnRJY29uU3RhdGUgPSAwXG5cbmV4cG9ydCBjb25zdCBJU1NVRVNfVVJMID0gXCJodHRwczovL2NlbHRyYS5hdGxhc3NpYW4ubmV0L2lzc3Vlcy8/anFsPWFzc2lnbmVlJTIwJTNEJTIwY3VycmVudFVzZXIoKSUyMGFuZCUyMHN0YXR1cyUyMGluJTIwKFxcXCJDb2RlJTIwcmV2aWV3XFxcIiUyQyUyMFxcXCJTcGVjJTIwcmV2aWV3XFxcIilcIlxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRWxlbWVudCAoZWxlbWVudElkOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBkaXNwbGF5ID0gdmlzaWJsZSA/IFwiYmxvY2tcIiA6IFwibm9uZVwiXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZClcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZSAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgbG9hZElzc3VlcygpXG4gICAgY29uc3QgbnVtYmVyT2ZJc3N1ZXMgPSBhd2FpdCBnZXROdW1iZXJPZklzc3VlcygpXG4gICAgY29uc3QgbnVtYmVyT2ZTdGFsZUlzc3VlcyA9IGF3YWl0IGdldE51bWJlck9mU3RhbGVJc3N1ZXMoKVxuICAgIGFuaW1hdGVJY29uKG51bWJlck9mSXNzdWVzLCBudW1iZXJPZlN0YWxlSXNzdWVzKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyT2ZJc3N1ZXMgKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgaXNzdWVVcGRhdGVkVGltZXN0YW1wcyA9IGF3YWl0IGdldExvY2FsbHkoU3RvcmFnZUtleVR5cGUuSVNTVUVfVVBEQVRFRF9USU1FU1RBTVBTKVxuICAgIGlmICghQXJyYXkuaXNBcnJheShpc3N1ZVVwZGF0ZWRUaW1lc3RhbXBzKSkge1xuICAgICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIHJldHVybiBpc3N1ZVVwZGF0ZWRUaW1lc3RhbXBzLmxlbmd0aFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyT2ZTdGFsZUlzc3VlcyAoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBjb25zdCBpc3N1ZVVwZGF0ZWRUaW1lc3RhbXBzID0gYXdhaXQgZ2V0TG9jYWxseShTdG9yYWdlS2V5VHlwZS5JU1NVRV9VUERBVEVEX1RJTUVTVEFNUFMpXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGlzc3VlVXBkYXRlZFRpbWVzdGFtcHMpKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzc3VlVXBkYXRlZFRpbWVzdGFtcHMucmVkdWNlKChudW1iZXJPZlN0YWxlSXNzdWVzLCBpc3N1ZVVwZGF0ZWRUaW1lc3RhbXApID0+IHtcbiAgICAgICAgY29uc3Qgbm93VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICAgIGNvbnN0IGlzc3VlVGltZSA9IG5ldyBEYXRlKGlzc3VlVXBkYXRlZFRpbWVzdGFtcCkuZ2V0VGltZSgpXG4gICAgICAgIGNvbnN0IGRpZmZJbk1pbGlzZWNvbmRzID0gTWF0aC5hYnMobm93VGltZSAtIGlzc3VlVGltZSlcbiAgICAgICAgaWYgKGRpZmZJbk1pbGlzZWNvbmRzID4gT05FX0RBWV9JTl9NSUxJU0VDT05EUykge1xuICAgICAgICAgICAgcmV0dXJuIG51bWJlck9mU3RhbGVJc3N1ZXMgKyAxXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyT2ZTdGFsZUlzc3Vlc1xuICAgICAgICB9XG4gICAgfSwgMClcbn1cblxuZnVuY3Rpb24gYW5pbWF0ZUljb24gKG51bWJlck9mSXNzdWVzOiBudW1iZXIsIG51bWJlck9mU3RhbGVJc3N1ZXM6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChudW1iZXJPZklzc3VlcyA9PT0gMCkge1xuICAgICAgICBjaHJvbWUuYWN0aW9uLnNldEljb24oeyBwYXRoOiBcIi4uLy4uL3B1YmxpYy9pY29uMTI4LnBuZ1wiIH0pXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChudW1iZXJPZlN0YWxlSXNzdWVzID09PSAwKSB7XG4gICAgICAgIGNocm9tZS5hY3Rpb24uc2V0SWNvbih7IHBhdGg6IFwiLi4vLi4vcHVibGljL2J1bm55XzAucG5nXCIgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY3VycmVudEljb25TdGF0ZSsrXG4gICAgY29uc3QgaWNvbk51bWJlciA9IGN1cnJlbnRJY29uU3RhdGUgJSA0XG4gICAgY2hyb21lLmFjdGlvbi5zZXRJY29uKHsgcGF0aDogYC4uLy4uL3B1YmxpYy9idW5ueV8ke2ljb25OdW1iZXJ9LnBuZ2AgfSlcbiAgICBpZiAodGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICAgICAgdGltZW91dCA9IG51bGxcbiAgICB9XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gYW5pbWF0ZUljb24obnVtYmVyT2ZJc3N1ZXMsIG51bWJlck9mU3RhbGVJc3N1ZXMpLCA1MClcbn1cbiJdfQ==
;// CONCATENATED MODULE: ./src/nagging/utils.ts

async function updateHtml() {
    const numberOfIssues = await getNumberOfIssues();
    const numberOfStaleIssues = await getNumberOfStaleIssues();
    const numberOfIssues1El = document.getElementById("number-of-issues-1");
    if (numberOfIssues1El) {
        numberOfIssues1El.innerText = numberOfIssues.toString(0);
    }
    const numberOfIssues2El = document.getElementById("number-of-issues-2");
    if (numberOfIssues2El) {
        numberOfIssues2El.innerText = numberOfIssues.toString(0);
    }
    const numberOfStaleIssuesEl = document.getElementById("number-of-stale-issues");
    if (numberOfStaleIssuesEl) {
        numberOfStaleIssuesEl.innerText = numberOfStaleIssues.toString(0);
    }
    if (numberOfStaleIssues > 0) {
        toggleElement("stale-issues", true);
        toggleElement("no-stale-issues", false);
    }
    else {
        toggleElement("no-stale-issues", true);
        toggleElement("stale-issues", false);
    }
}
async function openNagPage() {
    const numberOfStaleIssues = await utils_getNumberOfStaleIssues();
    if (numberOfStaleIssues === 0) {
        return;
    }
    const nagPageUrl = chrome.runtime.getURL("nagging/nagging.html");
    await chrome.tabs.create({
        active: true,
        url: nagPageUrl,
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbmFnZ2luZy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsc0JBQXNCLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUE7QUFFMUYsTUFBTSxDQUFDLEtBQUssVUFBVSxVQUFVO0lBQzVCLE1BQU0sY0FBYyxHQUFHLE1BQU0saUJBQWlCLEVBQUUsQ0FBQTtJQUNoRCxNQUFNLG1CQUFtQixHQUFHLE1BQU0sc0JBQXNCLEVBQUUsQ0FBQTtJQUUxRCxNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtJQUN2RSxJQUFJLGlCQUFpQixFQUFFO1FBQ25CLGlCQUFpQixDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQzNEO0lBQ0QsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUE7SUFDdkUsSUFBSSxpQkFBaUIsRUFBRTtRQUNuQixpQkFBaUIsQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUMzRDtJQUNELE1BQU0scUJBQXFCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO0lBQy9FLElBQUkscUJBQXFCLEVBQUU7UUFDdkIscUJBQXFCLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUNwRTtJQUVELElBQUksbUJBQW1CLEdBQUcsQ0FBQyxFQUFFO1FBQ3pCLGFBQWEsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDbkMsYUFBYSxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFBO0tBQzFDO1NBQU07UUFDSCxhQUFhLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDdEMsYUFBYSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQTtLQUN2QztBQUNMLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxVQUFVLFdBQVc7SUFDN0IsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLHNCQUFzQixFQUFFLENBQUE7SUFDMUQsSUFBSSxtQkFBbUIsS0FBSyxDQUFDLEVBQUU7UUFDM0IsT0FBTTtLQUNUO0lBRUQsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtJQUNoRSxNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLE1BQU0sRUFBRSxJQUFJO1FBQ1osR0FBRyxFQUFFLFVBQVU7S0FDbEIsQ0FBQyxDQUFBO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE51bWJlck9mSXNzdWVzLCBnZXROdW1iZXJPZlN0YWxlSXNzdWVzLCB0b2dnbGVFbGVtZW50IH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsc1wiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVIdG1sICgpIHtcbiAgICBjb25zdCBudW1iZXJPZklzc3VlcyA9IGF3YWl0IGdldE51bWJlck9mSXNzdWVzKClcbiAgICBjb25zdCBudW1iZXJPZlN0YWxlSXNzdWVzID0gYXdhaXQgZ2V0TnVtYmVyT2ZTdGFsZUlzc3VlcygpXG5cbiAgICBjb25zdCBudW1iZXJPZklzc3VlczFFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibnVtYmVyLW9mLWlzc3Vlcy0xXCIpXG4gICAgaWYgKG51bWJlck9mSXNzdWVzMUVsKSB7XG4gICAgICAgIG51bWJlck9mSXNzdWVzMUVsLmlubmVyVGV4dCA9IG51bWJlck9mSXNzdWVzLnRvU3RyaW5nKDApXG4gICAgfVxuICAgIGNvbnN0IG51bWJlck9mSXNzdWVzMkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJudW1iZXItb2YtaXNzdWVzLTJcIilcbiAgICBpZiAobnVtYmVyT2ZJc3N1ZXMyRWwpIHtcbiAgICAgICAgbnVtYmVyT2ZJc3N1ZXMyRWwuaW5uZXJUZXh0ID0gbnVtYmVyT2ZJc3N1ZXMudG9TdHJpbmcoMClcbiAgICB9XG4gICAgY29uc3QgbnVtYmVyT2ZTdGFsZUlzc3Vlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJudW1iZXItb2Ytc3RhbGUtaXNzdWVzXCIpXG4gICAgaWYgKG51bWJlck9mU3RhbGVJc3N1ZXNFbCkge1xuICAgICAgICBudW1iZXJPZlN0YWxlSXNzdWVzRWwuaW5uZXJUZXh0ID0gbnVtYmVyT2ZTdGFsZUlzc3Vlcy50b1N0cmluZygwKVxuICAgIH1cblxuICAgIGlmIChudW1iZXJPZlN0YWxlSXNzdWVzID4gMCkge1xuICAgICAgICB0b2dnbGVFbGVtZW50KFwic3RhbGUtaXNzdWVzXCIsIHRydWUpXG4gICAgICAgIHRvZ2dsZUVsZW1lbnQoXCJuby1zdGFsZS1pc3N1ZXNcIiwgZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlRWxlbWVudChcIm5vLXN0YWxlLWlzc3Vlc1wiLCB0cnVlKVxuICAgICAgICB0b2dnbGVFbGVtZW50KFwic3RhbGUtaXNzdWVzXCIsIGZhbHNlKVxuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wZW5OYWdQYWdlICgpIHtcbiAgICBjb25zdCBudW1iZXJPZlN0YWxlSXNzdWVzID0gYXdhaXQgZ2V0TnVtYmVyT2ZTdGFsZUlzc3VlcygpXG4gICAgaWYgKG51bWJlck9mU3RhbGVJc3N1ZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbmFnUGFnZVVybCA9IGNocm9tZS5ydW50aW1lLmdldFVSTChcIm5hZ2dpbmcvbmFnZ2luZy5odG1sXCIpXG4gICAgYXdhaXQgY2hyb21lLnRhYnMuY3JlYXRlKHtcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICB1cmw6IG5hZ1BhZ2VVcmwsXG4gICAgfSlcbn1cbiJdfQ==
;// CONCATENATED MODULE: ./src/background/background.ts


const PULL_DATA_ALARM_NAME = "pullExternalData";
const NAG_ALARM_NAME = "nag";
initialize();
async function initialize() {
    chrome.alarms.onAlarm.addListener(alarm => {
        if (alarm.name === PULL_DATA_ALARM_NAME) {
            update();
        }
        else if (alarm.name === NAG_ALARM_NAME) {
            handleNag();
        }
        else {
            console.log(`Unknown alarm encountered: '${alarm.name}'.`);
        }
    });
    await update();
    schedulePullDataAlarm();
    scheduleNagAlarm();
}
function schedulePullDataAlarm() {
    chrome.alarms.clear(PULL_DATA_ALARM_NAME);
    chrome.alarms.create(PULL_DATA_ALARM_NAME, { periodInMinutes: 5 });
    console.log("Pull data alarm scheduled.");
}
function scheduleNagAlarm() {
    chrome.alarms.clear(NAG_ALARM_NAME);
    const nextNagTime = getNextNagTime();
    chrome.alarms.create(NAG_ALARM_NAME, { when: nextNagTime.valueOf() });
    console.log(`Nag alarm scheduled for ${getNextNagTime().toString()}.`);
}
function getNextNagTime() {
    const date = new Date();
    const currentHour = date.getHours();
    if (currentHour < 9) { // morning
        date.setHours(9, 0, 0);
    }
    else if (currentHour < 14) { // midday
        date.setHours(14, 0, 0);
    }
    else { // later afternoon
        date.setDate(date.getDate() + 1);
        date.setHours(9, 0, 0);
    }
    return date;
}
async function handleNag() {
    scheduleNagAlarm();
    // never nag on weekends
    if (isWeekend()) {
        return;
    }
    await notify();
    await openNagPage();
}
async function notify() {
    const numberOfIssues = await utils_getNumberOfIssues();
    if (numberOfIssues === 0 || !numberOfIssues) {
        return;
    }
    chrome.notifications.create("issues-notification", {
        type: "basic",
        iconUrl: "../../public/bunny_0.png",
        title: "You have issues that are waiting for you",
        message: `There are ${numberOfIssues} issue(s) that are waiting for your review! Please click the notification to review them.`,
        priority: 2,
    });
    chrome.notifications.onClicked.addListener(() => chrome.tabs.create({ url: ISSUES_URL }));
}
function isWeekend() {
    const date = new Date();
    return date.getDay() === 6 || date.getDay() === 0;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iYWNrZ3JvdW5kL2JhY2tncm91bmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN2RSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFOUMsTUFBTSxvQkFBb0IsR0FBRyxrQkFBa0IsQ0FBQTtBQUMvQyxNQUFNLGNBQWMsR0FBRyxLQUFLLENBQUE7QUFFNUIsVUFBVSxFQUFFLENBQUE7QUFFWixLQUFLLFVBQVUsVUFBVTtJQUNyQixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDdEMsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLG9CQUFvQixFQUFFO1lBQ3JDLE1BQU0sRUFBRSxDQUFBO1NBQ1g7YUFBTSxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssY0FBYyxFQUFFO1lBQ3RDLFNBQVMsRUFBRSxDQUFBO1NBQ2Q7YUFBTTtZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsK0JBQStCLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFBO1NBQzdEO0lBQ0wsQ0FBQyxDQUFDLENBQUE7SUFFRixNQUFNLE1BQU0sRUFBRSxDQUFBO0lBQ2QscUJBQXFCLEVBQUUsQ0FBQTtJQUN2QixnQkFBZ0IsRUFBRSxDQUFBO0FBQ3RCLENBQUM7QUFFRCxTQUFTLHFCQUFxQjtJQUMxQixNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUFBO0lBQ3pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixFQUFFLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDbEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO0FBQzdDLENBQUM7QUFFRCxTQUFTLGdCQUFnQjtJQUNyQixNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQTtJQUNuQyxNQUFNLFdBQVcsR0FBRyxjQUFjLEVBQUUsQ0FBQTtJQUNwQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLDJCQUEyQixjQUFjLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUE7QUFDMUUsQ0FBQztBQUVELFNBQVMsY0FBYztJQUNuQixNQUFNLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFBO0lBQ3ZCLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtJQUVuQyxJQUFJLFdBQVcsR0FBRyxDQUFDLEVBQUUsRUFBRSxVQUFVO1FBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtLQUN6QjtTQUFNLElBQUksV0FBVyxHQUFHLEVBQUUsRUFBRSxFQUFFLFNBQVM7UUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0tBQzFCO1NBQU0sRUFBRSxrQkFBa0I7UUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7UUFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0tBQ3pCO0lBRUQsT0FBTyxJQUFJLENBQUE7QUFDZixDQUFDO0FBRUQsS0FBSyxVQUFVLFNBQVM7SUFDcEIsZ0JBQWdCLEVBQUUsQ0FBQTtJQUVsQix3QkFBd0I7SUFDeEIsSUFBSSxTQUFTLEVBQUUsRUFBRTtRQUNiLE9BQU07S0FDVDtJQUVELE1BQU0sTUFBTSxFQUFFLENBQUE7SUFDZCxNQUFNLFdBQVcsRUFBRSxDQUFBO0FBQ3ZCLENBQUM7QUFFRCxLQUFLLFVBQVUsTUFBTTtJQUVqQixNQUFNLGNBQWMsR0FBRyxNQUFNLGlCQUFpQixFQUFFLENBQUE7SUFDaEQsSUFBSSxjQUFjLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFO1FBQ3pDLE9BQU07S0FDVDtJQUVELE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLHFCQUFxQixFQUFFO1FBQy9DLElBQUksRUFBRSxPQUFPO1FBQ2IsT0FBTyxFQUFFLDBCQUEwQjtRQUNuQyxLQUFLLEVBQUUsMENBQTBDO1FBQ2pELE9BQU8sRUFBRSxhQUFhLGNBQWMsMkZBQTJGO1FBQy9ILFFBQVEsRUFBRSxDQUFDO0tBQ2QsQ0FBQyxDQUFBO0lBQ0YsTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUM3RixDQUFDO0FBRUQsU0FBUyxTQUFTO0lBQ2QsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQTtJQUN2QixPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQTtBQUNyRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TnVtYmVyT2ZJc3N1ZXMsIElTU1VFU19VUkwsIHVwZGF0ZSB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbHNcIlxuaW1wb3J0IHsgb3Blbk5hZ1BhZ2UgfSBmcm9tIFwiLi4vbmFnZ2luZy91dGlsc1wiXG5cbmNvbnN0IFBVTExfREFUQV9BTEFSTV9OQU1FID0gXCJwdWxsRXh0ZXJuYWxEYXRhXCJcbmNvbnN0IE5BR19BTEFSTV9OQU1FID0gXCJuYWdcIlxuXG5pbml0aWFsaXplKClcblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZSAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY2hyb21lLmFsYXJtcy5vbkFsYXJtLmFkZExpc3RlbmVyKGFsYXJtID0+IHtcbiAgICAgICAgaWYgKGFsYXJtLm5hbWUgPT09IFBVTExfREFUQV9BTEFSTV9OQU1FKSB7XG4gICAgICAgICAgICB1cGRhdGUoKVxuICAgICAgICB9IGVsc2UgaWYgKGFsYXJtLm5hbWUgPT09IE5BR19BTEFSTV9OQU1FKSB7XG4gICAgICAgICAgICBoYW5kbGVOYWcoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFVua25vd24gYWxhcm0gZW5jb3VudGVyZWQ6ICcke2FsYXJtLm5hbWV9Jy5gKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGF3YWl0IHVwZGF0ZSgpXG4gICAgc2NoZWR1bGVQdWxsRGF0YUFsYXJtKClcbiAgICBzY2hlZHVsZU5hZ0FsYXJtKClcbn1cblxuZnVuY3Rpb24gc2NoZWR1bGVQdWxsRGF0YUFsYXJtICgpOiB2b2lkIHtcbiAgICBjaHJvbWUuYWxhcm1zLmNsZWFyKFBVTExfREFUQV9BTEFSTV9OQU1FKVxuICAgIGNocm9tZS5hbGFybXMuY3JlYXRlKFBVTExfREFUQV9BTEFSTV9OQU1FLCB7IHBlcmlvZEluTWludXRlczogNSB9KVxuICAgIGNvbnNvbGUubG9nKFwiUHVsbCBkYXRhIGFsYXJtIHNjaGVkdWxlZC5cIilcbn1cblxuZnVuY3Rpb24gc2NoZWR1bGVOYWdBbGFybSAoKTogdm9pZCB7XG4gICAgY2hyb21lLmFsYXJtcy5jbGVhcihOQUdfQUxBUk1fTkFNRSlcbiAgICBjb25zdCBuZXh0TmFnVGltZSA9IGdldE5leHROYWdUaW1lKClcbiAgICBjaHJvbWUuYWxhcm1zLmNyZWF0ZShOQUdfQUxBUk1fTkFNRSwgeyB3aGVuOiBuZXh0TmFnVGltZS52YWx1ZU9mKCkgfSlcbiAgICBjb25zb2xlLmxvZyhgTmFnIGFsYXJtIHNjaGVkdWxlZCBmb3IgJHtnZXROZXh0TmFnVGltZSgpLnRvU3RyaW5nKCl9LmApXG59XG5cbmZ1bmN0aW9uIGdldE5leHROYWdUaW1lICgpOiBEYXRlIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IGN1cnJlbnRIb3VyID0gZGF0ZS5nZXRIb3VycygpXG5cbiAgICBpZiAoY3VycmVudEhvdXIgPCA5KSB7IC8vIG1vcm5pbmdcbiAgICAgICAgZGF0ZS5zZXRIb3Vycyg5LCAwLCAwKVxuICAgIH0gZWxzZSBpZiAoY3VycmVudEhvdXIgPCAxNCkgeyAvLyBtaWRkYXlcbiAgICAgICAgZGF0ZS5zZXRIb3VycygxNCwgMCwgMClcbiAgICB9IGVsc2UgeyAvLyBsYXRlciBhZnRlcm5vb25cbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMSlcbiAgICAgICAgZGF0ZS5zZXRIb3Vycyg5LCAwLCAwKVxuICAgIH1cblxuICAgIHJldHVybiBkYXRlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU5hZyAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgc2NoZWR1bGVOYWdBbGFybSgpXG5cbiAgICAvLyBuZXZlciBuYWcgb24gd2Vla2VuZHNcbiAgICBpZiAoaXNXZWVrZW5kKCkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYXdhaXQgbm90aWZ5KClcbiAgICBhd2FpdCBvcGVuTmFnUGFnZSgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIG5vdGlmeSAoKTogUHJvbWlzZTx2b2lkPlxue1xuICAgIGNvbnN0IG51bWJlck9mSXNzdWVzID0gYXdhaXQgZ2V0TnVtYmVyT2ZJc3N1ZXMoKVxuICAgIGlmIChudW1iZXJPZklzc3VlcyA9PT0gMCB8fCAhbnVtYmVyT2ZJc3N1ZXMpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKFwiaXNzdWVzLW5vdGlmaWNhdGlvblwiLCB7XG4gICAgICAgIHR5cGU6IFwiYmFzaWNcIixcbiAgICAgICAgaWNvblVybDogXCIuLi8uLi9wdWJsaWMvYnVubnlfMC5wbmdcIixcbiAgICAgICAgdGl0bGU6IFwiWW91IGhhdmUgaXNzdWVzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHlvdVwiLFxuICAgICAgICBtZXNzYWdlOiBgVGhlcmUgYXJlICR7bnVtYmVyT2ZJc3N1ZXN9IGlzc3VlKHMpIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHlvdXIgcmV2aWV3ISBQbGVhc2UgY2xpY2sgdGhlIG5vdGlmaWNhdGlvbiB0byByZXZpZXcgdGhlbS5gLFxuICAgICAgICBwcmlvcml0eTogMixcbiAgICB9KVxuICAgIGNocm9tZS5ub3RpZmljYXRpb25zLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcigoKSA9PiBjaHJvbWUudGFicy5jcmVhdGUoeyB1cmw6IElTU1VFU19VUkwgfSkpXG59XG5cbmZ1bmN0aW9uIGlzV2Vla2VuZCAoKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcbiAgICByZXR1cm4gZGF0ZS5nZXREYXkoKSA9PT0gNiB8fCBkYXRlLmdldERheSgpID09PSAwXG59XG4iXX0=
/******/ })()
;